<div class="overlay">
  <div class="card">
    <button class="close" type="button" (click)="dismiss()">Ã—</button>

    <div *ngIf="isLeaderOrAdmin" class="admin-icons">
      <button class="icon" type="button" (click)="openEdit()" aria-label="Edit">âœŽ</button>
      <button class="icon" type="button" (click)="askDelete()" aria-label="Delete">ðŸ—‘</button>
    </div>

    <div *ngIf="loading" class="loading"><mat-spinner></mat-spinner></div>
    <ng-container *ngIf="!loading && course">
      <h2 class="title">{{ course.name }}</h2>

      <div class="desc-scroll">
        <p>{{ course.description || 'â€”' }}</p>
      </div>

      <div class="meta">
        <span>Starts on: {{ formatDate(course.start_Date) }}</span>
        <span>Finishes on: {{ formatDate(course.finish_Date) }}</span>

        <button *ngIf="!isEnrolled && !isExpired"
                mat-raised-button color="primary"
                [disabled]="submitting"
                (click)="enroll()">Enroll</button>

        <button *ngIf="isEnrolled"
                type="button"
                class="chip chip-secondary cta-unenroll"
                [disabled]="submitting"
                (click)="unenroll()">Unenroll</button>

        <span *ngIf="isExpired && !isEnrolled" class="chip chip-grey" aria-label="Expired">Expired</span>
      </div>
    </ng-container>

    <p *ngIf="error" class="error">{{ error }}</p>
  </div>
</div>

<app-course-create-overlay
  *ngIf="editOpen && course as c"
  [course]="c"
  (close)="onEditClosed($event)">
</app-course-create-overlay>

<app-confirm-overlay
  *ngIf="confirmOpen"
  title="Delete course?"
  message="This action cannot be undone."
  (cancel)="cancelDelete()"
  (confirm)="confirmDelete()">
</app-confirm-overlay>
